services:
  fastapi-app:
    image: ejahdilan/fastapi-app:v1
    container_name: churn-fastapi-app
    restart: always
    # env_file:
    #   - ./.env
    extra_hosts:
      - "host.docker.internal:host-gateway"
    environment:
      DB2_USER: ${DB2_USER}
      DB2_HOST: ${DB2_HOST}
      DB2_PORT: ${DB2_PORT}
      DB2_NAME: ${DB2_NAME}
      # DB2_PASS_FILE: /run/secrets/db2_password

    # secrets:
    #   - db2_password

    ports:
      - "8000:8000"

    networks:
      - churnnet

# secrets:
#   db2_password:
#     file: /home/churnsvc/mlflow_setup/secrets/db2_pass.txt

# networks:
#   churnnet:
#     driver: bridge
